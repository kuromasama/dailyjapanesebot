# 📖 README.md (操作手冊)

## 🇯🇵 AI 日文斯巴達家教 (N2 Spartan Bot)

這是一個具備 **「情緒感知」**、**「解答延遲」** 與 **「學習追蹤」** 的 AI 家教。
它會根據你每天的努力程度，決定要誇獎你還是情勒你，並且嚴格追蹤你的執行回數。

## ✨ 主要功能

### 1. 🗂️ 單字管理 (Vocabulary)
* **批量匯入**：直接貼上 JSON 格式文字。
* **彈性存詞**：支援 `空白` 或 `/` 分隔 (如 `漢字/假名/意思`)，方便手機輸入。
* **記憶強化**：重複輸入同一單字時，系統會記錄並增加該單字在考試中出現的權重。

### 2. 📝 全能批改 & 進步分析 (Analysis)
* **API 省流機制**：你可以分多則訊息傳送作業，機器人會在執行時自動將它們「合併成一則」提交給 AI，大幅節省 API 用量。
* **進步追蹤**：AI 會讀取你的歷史翻譯紀錄，分析你的文法是否變精準、詞彙是否豐富，並給予鼓勵或警惕。
* **三種說法**：批改時提供 **正式 (Formal)**、**口語 (Casual)**、**換句話說 (Paraphrase)** 三種版本。

### 3. 😈 情緒化每日測驗 & Bonus 無限挑戰
* **每日必修 (Daily Mission)**：
    * 每天第一次執行 (通常是 12:05) 會發送 **10 題必修**。
    * **這 10 題決定了明天會被罵還是被誇**。
* **Bonus 無限挑戰 (Infinite Mode)**：
    * 如果你今天已經領過題目，再次手動執行 Action，教練會切換成 **Bonus 模式**。
    * 額外提供 **3 題高難度挑戰**。
    * **加分機制**：Bonus 題不寫沒關係 (不會被罵)，但如果有寫，明天教練會**超級崇拜你**！

### 4. ⏳ 解答延遲機制 (Deferred Answers)
為了避免你「看完答案就覺得自己會了」，本系統採用**「下次發送」**制：
* **每次執行**：系統會先發送「上一次測驗（無論是必修或 Bonus）」的詳解。
* **接著出題**：
    * 如果是**新的一天** -> 出 **每日必修 10 題**。
    * 如果**同一天**再次執行 -> 出 **Bonus 3 題**。

這種機制讓你隨時可以「交卷 -> 領詳解 -> 領新題」，節奏由你掌握！

---

## 🕹️ 使用指南與測資 (Test Data)

請直接複製以下內容傳送給 Telegram 機器人進行測試。

### A. 匯入單字 (Import)

直接傳送以下 JSON 文字：

```json
[
  {"kanji": "成長", "kana": "せいちょう", "meaning": "成長"},
  {"kanji": "確認", "kana": "かくにん", "meaning": "確認"},
  {"kanji": "連絡", "kana": "れんらく", "meaning": "聯絡"}
]

```

### B. 存單字 (Add Word)

支援 **空白分隔** 或 **斜線分隔** (二選一)：

**方式 1：空白分隔**

```text
我慢 がまん 忍耐

```

**方式 2：斜線分隔 (方便手機快速輸入)**

```text
我慢/がまん/忍耐

```

*(若重複輸入，機器人會回覆「🔄 強化記憶」)*

### C. 翻譯/交作業 (Practice)

支援 **多行傳送** 或 **多則訊息傳送** (系統會自動合併批改，節省額度)。
**不需輸入題號**，系統會依據換行自動計算回答了幾題。

**方式 1：一次傳完 (推薦)**

```text
明日は雨が降るそうです。
先生に連絡しました。
成長したいです。

```

*(這會被計為 3 題答題數)*

**方式 2：分段傳送 (不用擔心 API 暴增)**

* (訊息 1) `ご飯食べに行こう！`
* (訊息 2) `明日の天気はどうですか？`
*(機器人會偵測到這兩句屬於同一天的練習，自動合併送出批改)*

---

## ⚠️ 重要提醒 (Limitations)

1. **API 額度限制**：

* 本專案使用 Google Gemini 免費版 API。
* 雖然我們有「自動合併訊息」的省流功能，但仍請留意每日請求上限 (20 次/日)。

2. **手動批改 (Manual Trigger)**：

* 除了每天 12:05 自動執行外，你也可以隨時到 GitHub Actions 頁面點擊 **"Run workflow"**。
* **注意**：每次手動執行都會消耗一次 API 額度，並可能觸發新的測驗生成。
* **執行次數**：手動執行也會增加「執行回數」的計數。